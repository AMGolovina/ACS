# Отчет АКОС ИДЗ 3
Головина Арина БПИ244  

## Вариант 5
Задача о читателях и писателях. Базу данных, представленную массивом целых положительных чисел, разделяют два типа процессов: N читателей и K писателей. 
Читатели периодически просматривают случайные записи базы данных и выводят свой номер (например, PID), индекс записи, ее значение, а также вычисленное значение числа Фибоначчи. 
Писатели изменяют случайные записи на случайное число и также выводят информацию о своем номере, индексе записи, старом значении и новом значении. 
Предполагается, что в начале БД находится в непротиворечивом состоянии (все числа отсортированы, например, по возрастанию). 
Каждая отдельная новая запись переводит БД из одного непротиворечивого состояния в другое (то есть, новая сортировка может поменять индексы записей или переставить числа). 
Для предотвращения взаимного влияния транзакций процесс–писатель должен иметь исключительный доступ к БД. 
Если к БД не обращается ни один из процессов–писателей, то выполнять транзакции могут одновременно сколько угодно читателей.
Создать многопроцессное приложение с процессами-писателями и процессами-читателями.

P.S. работа выполнена на ... баллов, так что при описании на баллы ниже может отличатся немного структура и реализация)))

---

## на 4-6 баллов
Консольное приложение, в котором один родительский процесс запускает и использует требуемое число дочерних процессов.
### 1. Сценарий решаемой задачи:
База данных - это массив из 20 элементов, которые отсортированны по возрастанию вначале работы программы, следовательно числа от 1 до 20.
Количество писателей и читателей генерится рандомно вначале работы программы максимум может быть 5 писателей и читателей, минимум по одному.

`parent_sigint(int signo)` - устанавливает `terminate = 1`, чтобы все процессы завершились.

`fib(int n)` - вычисляет числа Фибоначи.

`reader_process(int id)` - процесс-читатель, читает рандомно из базы данных один элемент.

`writer_process(int id)` - процесс-писатель, изменяет рандомно из базы данных один элемент.

`cleanup_parent()` - очищает ресурсы.

1. Рандомно задается число читателей и писателей от 1 до 5 в N и K и выводится информация о получившемся количестве в консоль.
2. Создается или открывается`shared memory` и получаем доступ к памяти с проверками на корректность.
3. Инициализируются база данных и служебные поля `read_count` и `terminate`.
4. Создаются семафоры.
5. Устанавливается обработчик `SIGINT`, при нажатии `Ctrl+C` вызывается `parent_sigint` и программа завершается.
6. Далее два цикла создают процессы-писатели и процессы-читатели через `fork()` в функциях `reader_process(i)` и `writer_process(i)`.
7. Родитель ставит `wait()` и ожидая завершения процессов, далее очистка и завершение.
